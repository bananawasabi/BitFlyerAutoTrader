# BitFlyerAutoTradeBot

BitFlyerにて自動取引を行うbotです。

## 使い方
Linuxサーバーで常設プログラムとして動かすことを想定しています.
bot/vixrsi/vixrsi_bot.jsをnodeで起動することで稼働し始めます.
なお、直接起動するのではなく,プロセスマネージャの"PM2"をインストールしpm2config.ymlを読み込んで使用してください.
	$ cd bfbot
	$ npm install //初回起動時のみ
	$ pm2 start pm2config.yml //初回起動時のみ
	$ pm2 start autotrader //2回目以降の起動時
	
## ストラテジ
[tona-bitflyer-bot](https://note.mu/tonacoin)を参考にVIX戦術で動作しています。

また、単純決済機能の他にロスカット注文/利確注文機能があります。
デフォルトではロスカット・利確共に証拠金の3%が設定されており、ロスカットはポジション取得タイミングで3%以上の損失が出ていた場合に、利確はポジション取得タイミングで利益が3%を超えていた場合に機能がONになり、以降の取得で利益が3%以下になっていた場合に注文が発生しポジションを決済します。

発注/決済共に成行でオーダーを発行しますのでポジショニングに関する約定漏れ等は恐らく発生しないものと考えられます。

また、ロスカット・利確注文は設定(vixrsi_config.js)内のlosscutPercentage/profitPercentageで設定しているためこれを書き換える事で範囲を変更することが可能です。


動作するVIX戦術は主に"押し目"で売買する戦略であるため、定期的に"崖"が発生するBTC-FXではどうしてもロスカットが発生してしまいます。
ロスカット後に通常通りの戦略で注文を続けてしまうと損失が嵩んでしまうため、現状はロスカット後はその方向のシグナルが消えるまでbotが発注を行うことはありません。
(例: 一時の跳ね上げで売り注文を発注したが、その後も値上がりが続き、ロスカットが発生した場合、値上がり中はほぼ売り注文が続いていますが、これは無視され次にノーシグナル,又は買いを認識すると動作が再開します)

現状はこの対応ですが、戦略と立案とそれをコードに書き起こすことができ次第、ロスカット後は逆注文を行うような仕組みにし、ロスを最小限に、プロフィットを最大限にする用変更を行いたいと考えています。

## おまけ

また、ニッチなターゲットですが「シストレをしてもどうしても自分で介入してしまい損失を増やしてしまう・・・」という方（以外も）に向けた発注や価格チャートは見れないが当日の取引履歴や現在のポジション、日次損益を確認できるWebAppを（こちらもβ版版ではありますが）作成いたしました。

現状はBitFlyerのAPIに接続し各種データを取得し表示するだけのアプリですが、最終的にはこのWebアプリ上からbotのコントロール(On/Offや設定変更等)を行えればと予定しております。

## 実装予定の機能

- RealTimeAPIに対応・移行
- ロスカット注文後の戦略変更
- DBを実装しリアルタイムシミュレート


## Special thanks

このプログラムの元となるコードをGithubで公開してくださった[@tonacoin](https://twitter.com/tonacoin)様に厚くお礼申し上げます。ありがとうございます。

## ReleaseNote

2018/07/19 デバッグ/リファクタリングで安定性向上		Ver. 0.1.1
2018/07/18 ロスカット/利確注文機能を追加			Ver. 0.1.0
2018/07/13 tonacoin様のノートを参考に稼働可能版が完成 		Ver. 0.0.1
